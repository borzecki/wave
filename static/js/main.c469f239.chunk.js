(this.webpackJsonpwave=this.webpackJsonpwave||[]).push([[0],{42:function(e,t,n){e.exports=n(50)},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),i=n.n(o),s=n(7),u=n(32),c=n(1),l=n(59),f=n(52),m=n(60),h=n(53),v=n(61),d=n(58),p=n(54),g=n(55),y=n(56),b=n(57),x=n(13),w=n(11),E=n(33),M=function(){function e(t,n,a){Object(w.a)(this,e),this.x=t,this.y=n,this.z=a}return Object(E.a)(e,[{key:"dot2",value:function(e,t){return this.x*e+this.y*t}},{key:"dot3",value:function(e,t,n){return this.x*e+this.y*t+this.z*n}}]),e}(),j=[new M(1,1,0),new M(-1,1,0),new M(1,-1,0),new M(-1,-1,0),new M(1,0,1),new M(-1,0,1),new M(1,0,-1),new M(-1,0,-1),new M(0,1,1),new M(0,-1,1),new M(0,1,-1),new M(0,-1,-1)],O=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],_=new Array(512),D=new Array(512);!function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;n=1&t?O[t]^255&e:O[t]^e>>8&255,_[t]=_[t+256]=n,D[t]=D[t+256]=j[n%12]}}(0);Math.sqrt(3),Math.sqrt(3);function P(e){return e*e*e*(e*(6*e-15)+10)}function S(e,t,n){return(1-n)*e+n*t}var F=function(e,t,n){var a=Math.floor(e),r=Math.floor(t),o=Math.floor(n);e-=a,t-=r,n-=o;var i=D[(a&=255)+_[(r&=255)+_[o&=255]]].dot3(e,t,n),s=D[a+_[r+_[o+1]]].dot3(e,t,n-1),u=D[a+_[r+1+_[o]]].dot3(e,t-1,n),c=D[a+_[r+1+_[o+1]]].dot3(e,t-1,n-1),l=D[a+1+_[r+_[o]]].dot3(e-1,t,n),f=D[a+1+_[r+_[o+1]]].dot3(e-1,t,n-1),m=D[a+1+_[r+1+_[o]]].dot3(e-1,t-1,n),h=D[a+1+_[r+1+_[o+1]]].dot3(e-1,t-1,n-1),v=P(e),d=P(t),p=P(n);return S(S(S(i,l,v),S(s,f,v),p),S(S(u,m,v),S(c,h,v),p),d)},R=n(39),C=n(18),U=n(34),T=n(40),q=n(41),k=n(4),V={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:"varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"uniform int byp; //should we apply the glitch\n    uniform sampler2D tDiffuse;\n    uniform sampler2D tDisp;\n    uniform float amount;\n    uniform float angle;\n    uniform float seed;\n    uniform float seed_x;\n    uniform float seed_y;\n    uniform float distortion_x;\n    uniform float distortion_y;\n    uniform float col_s;\n    varying vec2 vUv;\n    float rand(vec2 co){\n      return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n    }\n    void main() {\n      if(byp<1) {\n        vec2 p = vUv;\n        float xs = floor(gl_FragCoord.x / 0.5);\n        float ys = floor(gl_FragCoord.y / 0.5);\n        //based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n        vec4 normal = texture2D (tDisp, p*seed*seed);\n        if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\n          if(seed_x>0.){\n            p.y = 1. - (p.y + distortion_y);\n          }\n          else {\n            p.y = distortion_y;\n          }\n        }\n        p.x+=normal.x*seed_x*(seed/5.);\n        p.y+=normal.y*seed_y*(seed/5.);\n        //base from RGB shift shader\n        vec2 offset = amount * vec2( cos(angle), sin(angle));\n        vec4 cr = texture2D(tDiffuse, p + offset);\n        vec4 cga = texture2D(tDiffuse, p);\n        vec4 cb = texture2D(tDiffuse, p - offset);\n        gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n      }\n      else {\n        gl_FragColor=texture2D (tDiffuse, vUv);\n      }\n    }"},G=function(e){k.a.call(this),void 0===V&&console.error("THREE.GlitchPass relies on THREE.DigitalGlitch");var t=V;this.uniforms=c.UniformsUtils.clone(t.uniforms),void 0===e&&(e=64),this.uniforms.tDisp.value=this.generateHeightmap(e),this.material=new c.ShaderMaterial({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.camera=new c.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new c.Scene,this.quad=new c.Mesh(new c.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.factor=0};G.prototype=Object.assign(Object.create(k.a.prototype),{constructor:G,render:function(e,t,n,a,r){var o=Math.max(0,this.factor);this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random()*o,this.uniforms.byp.value=0,o?(this.uniforms.amount.value=Math.random()/90*o,this.uniforms.angle.value=c.Math.randFloat(-Math.PI,Math.PI)*o,this.uniforms.distortion_x.value=c.Math.randFloat(0,1)*o,this.uniforms.distortion_y.value=c.Math.randFloat(0,1)*o,this.uniforms.seed_x.value=c.Math.randFloat(-.3,.3)*o,this.uniforms.seed_y.value=c.Math.randFloat(-.3,.3)*o):this.uniforms.byp.value=1,this.quad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),e.render(this.scene,this.camera)):(e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera))},generateHeightmap:function(e){for(var t=new Float32Array(e*e*3),n=e*e,a=0;a<n;a++){var r=c.Math.randFloat(0,1);t[3*a+0]=r,t[3*a+1]=r,t[3*a+2]=r}var o=new c.DataTexture(t,e,e,c.RGBFormat,c.FloatType);return o.needsUpdate=!0,o}});var B={uniforms:{byp:{value:0},texture:{type:"t",value:null},time:{type:"f",value:0},factor:{type:"f",value:0},resolution:{type:"v2",value:null}},vertexShader:"varying vec2 vUv;\n    void main(){  \n      vUv = uv; \n      vec4 modelViewPosition = modelViewMatrix * vec4(position, 1.0);\n      gl_Position = projectionMatrix * modelViewPosition;\n    }",fragmentShader:"uniform int byp; //should we apply the glitch ?\n    uniform float time;\n    uniform float factor;\n    uniform vec2 resolution;\n    uniform sampler2D texture;\n    \n    varying vec2 vUv;\n    \n    void main() {  \n      if (byp<1) {\n        vec2 uv1 = vUv;\n        vec2 uv = gl_FragCoord.xy/resolution.xy;\n        float frequency = 6.0;\n        float amplitude = 0.015 * factor;\n        float x = uv1.y * frequency + time * .7; \n        float y = uv1.x * frequency + time * .3;\n        uv1.x += cos(x+y) * amplitude * cos(y);\n        uv1.y += sin(x-y) * amplitude * cos(y);\n        vec4 rgba = texture2D(texture, uv1);\n        gl_FragColor = rgba;\n      } else {\n        gl_FragColor = texture2D(texture, vUv);\n      }\n    }"},A=function(e){k.a.call(this),void 0===B&&console.error("THREE.WaterPass relies on THREE.WaterShader");var t=B;this.uniforms=c.UniformsUtils.clone(t.uniforms),void 0===e&&(e=64),this.uniforms.resolution.value=new c.Vector2(e,e),this.material=new c.ShaderMaterial({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.camera=new c.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new c.Scene,this.quad=new c.Mesh(new c.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.factor=0,this.time=0};function H(e){var t=e.down,n=Object(a.useRef)(),o=Object(x.d)(),i=o.scene,s=o.gl,u=o.size,l=o.camera,f=Object(a.useMemo)((function(){return new c.Vector2(u.width,u.height)}),[u]);return Object(a.useEffect)((function(){n.current.setSize(u.width,u.height)}),[u]),Object(x.c)((function(){return n.current.render()}),1),r.a.createElement("effectComposer",{ref:n,args:[s]},r.a.createElement("renderPass",{attachArray:"passes",scene:i,camera:l}),r.a.createElement("unrealBloomPass",{attachArray:"passes",args:[f,.5,2,.005]}),r.a.createElement("glitchPass",{attachArray:"passes",factor:t?1:0}))}A.prototype=Object.assign(Object.create(k.a.prototype),{constructor:A,render:function(e,t,n,a,r){var o=Math.max(0,this.factor);this.uniforms.byp.value=o?0:1,this.uniforms.texture.value=n.texture,this.uniforms.time.value=this.time,this.uniforms.factor.value=this.factor,this.time+=.05,this.quad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),e.render(this.scene,this.camera)):(e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera))}}),Object(x.b)({EffectComposer:R.a,ShaderPass:C.a,RenderPass:U.a,WaterPass:A,UnrealBloomPass:T.a,FilmPass:q.a,GlitchPass:G});n(49);var N=function(e){var t=e.groups,n=e.noisefn,o=e.rotateMode,i=Object(u.a)(e,["groups","noisefn","rotateMode"]),s=Object(a.useRef)();return Object(x.c)((function(e){var a=e.clock.getElapsedTime();o?(s.current.rotation.x=Math.sin(a/4),s.current.rotation.y=Math.sin(a/2)):(s.current.rotation.x=0,s.current.rotation.y=0);for(var r=Object(l.a)((function(e){return Object(f.a)(Object(l.a)((function(e){return[e.name,e.value]}),e))}),t),i=function(){var e=s.current.geometry.vertices[u],t=e.x,o=e.y,i=Object(l.a)((function(e){var r=e.coefficient,i=e.magnitude,s=e.speed,u=e.move;return n(t*r,o*r+a*u,a*s)*i}),r);s.current.geometry.vertices[u].z=Object(m.a)(i)},u=0;u<s.current.geometry.vertices.length;u++)i();s.current.geometry.verticesNeedUpdate=!0})),r.a.createElement("group",i,r.a.createElement("mesh",{ref:s},r.a.createElement("planeGeometry",{attach:"geometry",args:[100,200,200,200]}),r.a.createElement("meshPhongMaterial",{attach:"material",color:"red",wireframe:!0})))},z=function(e){var t=e.name,n=e.value,a=e.setValue,o=e.step;return r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:t},t),r.a.createElement("input",{name:t,type:"number",value:n,step:o,onChange:function(e){return a(e.target.value)}}))},W=function(e){var t=e.controlGroups,n=e.setValue,a=e.onRemove;return r.a.createElement("div",{className:"controls"},t.map((function(e,t){return r.a.createElement(I,{key:t,onRemove:function(){return a(t)},setValue:n(t),controls:e})})))},I=function(e){var t=e.controls,n=e.setValue,a=e.onRemove;return r.a.createElement("div",{className:"control"},r.a.createElement("div",{className:"remove-control",onClick:a},"-"),t.map((function(e){return r.a.createElement(z,Object.assign({key:e.name,setValue:n(e.name)},e))})))};var J=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)([]),u=Object(s.a)(i,2),l=u[0],f=u[1],m=Object(h.a)((function(e,t,n){var a=Object(v.a)(Object(d.a)("name",t),l[e]),r=Object(p.a)(e,(function(){return Object(p.a)(a,(function(){return Object(g.a)("value",n,l[e][a])}),l[e])}),l);f(r)})),w=function(){return f(Object(y.a)([{name:"coefficient",value:.04,step:.01},{name:"magnitude",value:14,step:1},{name:"speed",value:1,step:1},{name:"move",value:2,step:1}],l))};Object(a.useEffect)((function(){return w()}),[]);var E=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{shadowMap:!0,pixelRatio:Math.min(2,E?window.devicePixelRatio:1),camera:{rotation:[60*Math.PI/180,0,0],position:[0,-80,40]},onMouseUp:function(){return o(!1)},onMouseDown:function(){return o(!0)},gl:{alpha:!1,antialias:!0,logarithmicDepthBuffer:!0},onCreated:function(e){var t=e.gl;t.toneMapping=c.ACESFilmicToneMapping,t.outputEncoding=c.sRGBEncoding}},r.a.createElement("fog",{attach:"fog",args:["black",10,200]}),r.a.createElement(N,{rotateMode:n,groups:l,noisefn:F,position:[0,0,-10],scale:[1.5,1,1]}),r.a.createElement("ambientLight",{intensity:1}),r.a.createElement(H,{down:n})),r.a.createElement("div",{className:"add-control",onClick:w},"+"),r.a.createElement(W,{controlGroups:l,setValue:m,onRemove:function(e){return f(Object(b.a)(e,1,l))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.c469f239.chunk.js.map